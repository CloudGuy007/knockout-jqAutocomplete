// knockout-jqAutocomplete 0.1.1 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
!function(a){"function"==typeof define&&define.amd?define(["knockout","jquery","jquery.ui"],a):a(window.ko,jQuery)}(function(a,b){var c=function(){var c=this;this.init=function(d,e,f,g,h){var i=a.unwrap(e()),j={},k="function"==typeof i.filter?i.filter:c.defaultFilter;a.utils.extend(j,c.options),a.utils.extend(j,i.options),j.source="function"!=typeof i.source||a.isObservable(i.source)?c.processOptions.bind(c,e,k,i.source):function(a,b){var d=function(d){c.processOptions(e,null,d,a,b)};i.source.call(h.$data,a.term,d)},j.select=function(a,b){i.value(b.item&&b.item.actual)};var l=b(d).autocomplete(j).data("ui-autocomplete");i.template&&(l._renderItem=c.renderItem.bind(c,i.template,h)),a.utils.domNodeDisposal.addDisposeCallback(d,function(){l&&"function"==typeof l.destroy&&(l.destroy(),l=null)})},this.defaultFilter=function(b,c){return c=c&&c.toLowerCase(),(b||0===b)&&a.toJSON(b).toLowerCase().indexOf(c)>-1},this.processOptions=function(b,c,d,e,f){var g,h,i,j=a.unwrap(d)||[],k=[],l=this.getPropertyNames(b);for(h=0,i=j.length;i>h;h++)g=j[h],(!c||c(g,e.term))&&k.push({label:l.label?g[l.label]:g.toString(),value:l.input?g[l.input]:g.toString(),actual:l.value?g[l.value]:g,data:g});f(k)},this.renderItem=function(c,d,e,f){var g=b("<li></li>").appendTo(e),h=d.createChildContext(f.data);return a.applyBindingsToNode(g[0],{template:c},h),g.one("remove",a.cleanNode.bind(a,g[0])),g},this.getPropertyNames=function(b){var c=a.toJS(b());return{label:c.labelProp||c.valueProp,input:c.inputProp||c.labelProp||c.valueProp,value:c.valueProp}},this.options={autoFocus:!0,delay:50}};a.bindingHandlers.jqAuto=new c});